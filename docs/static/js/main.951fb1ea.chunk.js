(this["webpackJsonptinote-web"]=this["webpackJsonptinote-web"]||[]).push([[0],{110:function(e,t,n){e.exports={Menu:"Menu_Menu__2U4Vu"}},111:function(e,t,n){e.exports=n.p+"static/media/profile-img.01327c90.png"},112:function(e,t,n){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__3iEQ1"}},113:function(e,t,n){e.exports={NoteItems:"NoteItems_NoteItems__28LUH"}},115:function(e,t,n){e.exports={FolderItems:"FolderItems_FolderItems__2jToC"}},116:function(e,t,n){e.exports={Explorer:"Explorer_Explorer__3y22j"}},119:function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__NhvU6"}},120:function(e,t,n){e.exports={loader:"Spinner_loader__2KmVm",load1:"Spinner_load1__30IQu"}},122:function(e,t,n){e.exports=n(319)},127:function(e,t,n){},21:function(e,t,n){e.exports={ContextMenu:"ContextMenu_ContextMenu__1m4Th",Hide:"ContextMenu_Hide__mJh99",ContextMenuItems:"ContextMenu_ContextMenuItems__2cM-Z",TableMenu:"ContextMenu_TableMenu__3rUfS",ContextMenuItem:"ContextMenu_ContextMenuItem__BaZiy"}},23:function(e,t,n){e.exports={NoteItem:"NoteItem_NoteItem__1I4-F",Active:"NoteItem_Active__We-oo",Title:"NoteItem_Title__2SM69",Content:"NoteItem_Content__259o2",Date:"NoteItem_Date__3WwS8"}},30:function(e,t,n){e.exports={FolderItem:"FolderItem_FolderItem__5rgJ9",Active:"FolderItem_Active__18g6D",Icon:"FolderItem_Icon__1gRlN",Name:"FolderItem_Name__2T2tw"}},319:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(28),c=n.n(a),i=(n(127),n(9)),l=n(10),u=n(15),s=n(14),d=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{style:{height:"100%"}},this.props.children))}}]),n}(o.Component),f=n(2),p=n(49),m=n.n(p),E=n(110),_=n.n(E),h=n(50),b=n.n(h),T=n(111),C=n.n(T),S=function(e){return r.a.createElement("div",{className:b.a.Profile},r.a.createElement("img",{className:b.a.Img,src:C.a,alt:"Profile"}),r.a.createElement("p",{className:b.a.ProfileName},e.profileName))},g=n(67),N=n.n(g),v=function(e){var t=[N.a.ToolbarButton];return e.active&&t.push(N.a.Active),r.a.createElement("div",{onClick:e.clicked,className:t},r.a.createElement("span",{className:"material-icons"},e.btnType))},O=n(112),k=n.n(O),y=function(e){return r.a.createElement("div",{className:k.a.DrawerToggle,onClick:e.clicked},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},I=n(51),A=n.n(I),F=function(e){return r.a.createElement("div",{className:A.a.Toolbar},r.a.createElement(y,{clicked:e.burgerClicked}),r.a.createElement("input",{className:A.a.Search,type:"search",placeholder:"Search"}),r.a.createElement("div",{className:A.a.Button},r.a.createElement(v,{clicked:e.buttonClicked,active:!1,btnType:e.btnType})))},w=function(e){return r.a.createElement("div",{className:_.a.Menu},r.a.createElement(S,{profileName:"Name"}),r.a.createElement(F,{burgerClicked:e.openSideDrawer,btnType:e.toolbarBtnType,buttonClicked:e.toolbarButtonClicked}))},R=n(23),D=n.n(R),x=function(e){var t=[D.a.NoteItem];return e.active&&t.push(D.a.Active),r.a.createElement("li",{onContextMenu:e.leftClicked,onClickCapture:e.clicked,className:t.join(" ")},r.a.createElement("p",{contentEditable:e.rename,onBlur:e.onRename,onKeyPress:e.onRename,className:D.a.Title},e.title),r.a.createElement("p",{className:D.a.Content},e.content),r.a.createElement("p",{className:D.a.Date},e.date))},H=n(113),j=n.n(H),L=function(e,t){return Object(f.a)(Object(f.a)({},e),t)};function U(e,t){var n,o=this;return function(){for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];var i=function(){clearTimeout(n),e.apply(o,a)};clearTimeout(n),n=setTimeout(i,t)}}function M(e,t){if(e===t)return{isDiffer:!1,updated:[],deleted:[]};var n=e.filter((function(e){return!t.some((function(t){return e.id===t.id}))})),o=t.filter((function(t){return!e.includes(t)}));return{isDiffer:o.length||n.length,updated:o,deleted:n}}function P(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}var B=n(114),V=n.n(B),G=function(e){var t=e.notes.map((function(t){return r.a.createElement(x,{leftClicked:function(n){return e.showContext(n,"note",t.id)},active:t.id===e.current,onRename:e.onEndRename,rename:t.id===e.renameId,key:t.id,clicked:function(){return e.select(t.id)},title:t.title,content:P(t.content.slice(0,50)),date:V()(t.date).fromNow()})}));return r.a.createElement("ul",{className:j.a.NoteItems},t)},Q=n(115),X=n.n(Q),J=n(30),W=n.n(J),Y=function(e){var t=[W.a.FolderItem];return e.active&&t.push(W.a.Active),r.a.createElement("li",{onContextMenu:e.leftClicked,onClickCapture:e.clicked,className:t.join(" "),style:{color:e.color}},r.a.createElement("span",{className:"material-icons "+W.a.Icon},e.icon),r.a.createElement("p",{contentEditable:e.rename,onBlur:e.onRename,onKeyPress:e.onRename,className:W.a.Name},e.name))},K={name:"New Folder",color:"#ccc",icon:"folder"},q={content:"",date:"Not provided",title:"New Note"},z=[{name:"Rename",action:"Rename"},{name:"Delete",action:"Delete"},{isTable:!0,name:"Colors",buttons:[{backgroundColor:"#1abc9c",action:{backgroundColor:"#1abc9c"}},{backgroundColor:"#2ecc71",action:{backgroundColor:"#2ecc71"}},{backgroundColor:"#3498db",action:{backgroundColor:"#3498db"}},{backgroundColor:"#9b59b6",action:{backgroundColor:"#9b59b6"}},{backgroundColor:"#34495e",action:{backgroundColor:"#34495e"}},{backgroundColor:"#16a085",action:{backgroundColor:"#16a085"}},{backgroundColor:"#27ae60",action:{backgroundColor:"#27ae60"}},{backgroundColor:"#2980b9",action:{backgroundColor:"#2980b9"}},{backgroundColor:"#8e44ad",action:{backgroundColor:"#8e44ad"}},{backgroundColor:"#2c3e50",action:{backgroundColor:"#2c3e50"}},{backgroundColor:"#f1c40f",action:{backgroundColor:"#f1c40f"}},{backgroundColor:"#e67e22",action:{backgroundColor:"#e67e22"}},{backgroundColor:"#e74c3c",action:{backgroundColor:"#e74c3c"}},{backgroundColor:"#ecf0f1",action:{backgroundColor:"#ecf0f1"}},{backgroundColor:"#95a5a6",action:{backgroundColor:"#95a5a6"}},{backgroundColor:"#f39c12",action:{backgroundColor:"#f39c12"}},{backgroundColor:"#d35400",action:{backgroundColor:"#d35400"}},{backgroundColor:"#c0392b",action:{backgroundColor:"#c0392b"}},{backgroundColor:"#bdc3c7",action:{backgroundColor:"#bdc3c7"}},{backgroundColor:"#7f8c8d",action:{backgroundColor:"#7f8c8d"}}]},{isTable:!0,name:"Icon",buttons:[{icon:"outlet",action:{icon:"outlet"}},{icon:"accessibility",action:{icon:"accessibility"}},{icon:"accessible",action:{icon:"accessible"}},{icon:"alarm_on",action:{icon:"alarm_on"}},{icon:"assignment",action:{icon:"assignment"}},{icon:"face",action:{icon:"face"}},{icon:"get_app",action:{icon:"get_app"}},{icon:"schedule",action:{icon:"schedule"}},{icon:"shopping_cart",action:{icon:"shopping_cart"}},{icon:"thumb_up",action:{icon:"thumb_up"}},{icon:"thumb_down",action:{icon:"thumb_down"}},{icon:"rss_feed",action:{icon:"thumb_down"}},{icon:"visibility",action:{icon:"visibility"}},{icon:"error",action:{icon:"error"}},{icon:"call",action:{icon:"call"}},{icon:"clear",action:{icon:"clear"}},{icon:"mail",action:{icon:"mail"}},{icon:"weekend",action:{icon:"weekend"}},{icon:"attach_money",action:{icon:"attach_money"}},{icon:"tag_faces",action:{icon:"tag_faces"}}]}],Z=[{name:"Rename",action:"Rename"},{name:"Delete",action:"Delete"}],$=[{name:"Clear",action:"Clear"}],ee=function(e){var t=e.folders.map((function(t){return r.a.createElement(Y,{leftClicked:function(n){return e.showContext(n,"folder",t.id)},active:t.id===e.current,onRename:e.onEndRename,rename:t.id===e.renameId,clicked:function(){return e.select(t.id)},key:t.id,icon:t.icon,color:t.color,name:t.name})}));return r.a.createElement("ul",{className:X.a.FolderItems},r.a.createElement(Y,{active:"UNSORTED"===e.current,clicked:function(){return e.select("UNSORTED")},key:"UNSORTED",icon:"topic",color:"#ccc",name:"Unsorted"}),r.a.createElement(Y,{active:"ALL_NOTES"===e.current,clicked:function(){return e.select("ALL_NOTES")},key:"ALL_NOTES",icon:"rule_folder",color:"#ccc",name:"All"}),t,r.a.createElement(Y,{active:!1,clicked:function(){return e.addFolder({})},key:"__ADD_FOLDER",icon:"create_new_folder",color:"#ccc",name:"Add folder"}),r.a.createElement(Y,{leftClicked:function(t){return e.showContext(t,"folder","TRASH")},active:"TRASH"===e.current,clicked:function(){return e.select("TRASH")},key:"TRASH",icon:"delete",color:"#ccc",name:"Trash"}))},te=n(116),ne=n.n(te),oe=n(13),re=n(31),ae=n.n(re),ce=n(69),ie=n(70);n(133),n(135);ie.initializeApp({apiKey:"AIzaSyDvc6lij9iMoZ8tDBfLghISPKJtqx_L54U",authDomain:"tinote-5fd77.firebaseapp.com",databaseURL:"https://tinote-5fd77.firebaseio.com",projectId:"tinote-5fd77",storageBucket:"tinote-5fd77.appspot.com",messagingSenderId:"207256672485",appId:"1:207256672485:web:94c7f77f99e19706da9c0c"});var le=ie,ue=new(function(){function e(){Object(i.a)(this,e),this.notes=[],this.folders=[],this.db=le.firestore(),this.init()}return Object(l.a)(e,[{key:"init",value:function(){var e=Object(ce.a)(ae.a.mark((function e(){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_registerListener",value:function(){var e=Object(ce.a)(ae.a.mark((function e(t,n){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db;case 2:this.db.collection(t).onSnapshot((function(e){var t=[],o=[];e.docChanges().forEach((function(e){"removed"===e.type?o.push({id:e.doc.id}):t.push(Object(f.a)(Object(f.a)({},e.doc.data()),{},{id:e.doc.id}))})),n(t,o)}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"registerNotesListener",value:function(e){console.log("register"),this._registerListener("notes",e)}},{key:"registerFoldersListener",value:function(e){this._registerListener("folders",e)}},{key:"getId",value:function(e){return this.db.collection(e).doc().id}},{key:"save",value:function(e){var t,n,o=this,r=e.notes,a=e.folders;return t=M(this.notes,r||this.notes),n=M(this.folders,a||this.folders),t.isDiffer||n.isDiffer?(console.log(t),new Promise((function(e,c){var i=o.db.batch();n.deleted.forEach((function(e){var t=o.db.collection("folders").doc(e.id);i.delete(t)})),t.deleted.forEach((function(e){var t=o.db.collection("notes").doc(e.id);i.delete(t)})),n.updated.forEach((function(e){var t=o.db.collection("folders").doc(e.id);i.set(t,{name:e.name,color:e.color,icon:e.icon})})),t.updated.forEach((function(e){var t=o.db.collection("notes").doc(e.id);i.set(t,{title:e.title,content:e.content,folder:e.folder,date:e.date})})),i.commit().then((function(t){r&&(o.notes=r),a&&(o.folders=a),e(t)})).catch((function(e){c(e)}))}))):(console.log("FIREthis.db ISNT DIFFER"),new Promise((function(e){return e(!0)})))}},{key:"get",value:function(e){var t=this;return new Promise((function(n,o){t.db.collection(e).get().then((function(o){var r=[];o.forEach((function(e){r.push(Object(f.a)(Object(f.a)({},e.data()),{},{id:e.id}))})),"folders"===e&&(t.folders=r),"notes"===e&&(t.notes=r),n(r)})).catch((function(e){o(e)}))}))}}]),e}()),se=function(e){return{type:"SELECT_NOTE",id:e}},de=function(e,t){return{type:"RENAME_NOTE",id:e,newName:t}},fe=function(){return function(e){e({type:"FETCH_NOTE_START"}),ue.get("notes").then((function(t){e({type:"FETCH_NOTE_SUCCESS",notes:t,date:(new Date).getTime()})})).catch((function(t){e(function(e){return{type:"FETCH_NOTE_FAIL",error:e}}(t))}))}},pe=function(){return{type:"UPDATE_NOTE_SUCCESS",date:(new Date).getTime()}},me=function(){return function(e){ue.registerNotesListener((function(t,n){return e(function(e,t){return{type:"SYNC_NOTES_FROM_SERVER",updated:e,deleted:t,date:(new Date).getTime()}}(t,n))}))}},Ee=function(e,t){return{type:"RENAME_FOLDER",id:e,newName:t}},_e=function(){return function(e){e({type:"FETCH_FOLDERS_START"}),ue.get("folders").then((function(t){e({type:"FETCH_FOLDERS_SUCCESS",folders:t,date:(new Date).getTime()})})).catch((function(t){e(function(e){return{type:"FETCH_FOLDERS_FAIL",error:e}}(t))}))}},he=function(){return{type:"UPDATE_FOLDERS_SUCCESS",date:(new Date).getTime()}},be=function(){return function(e){ue.registerFoldersListener((function(t,n){return e(function(e,t){return{type:"SYNC_FOLDERS_FROM_SERVER",updated:e,deleted:t,date:(new Date).getTime()}}(t,n))}))}},Te=le.auth(),Ce=function(e){return{type:"AUTH_FAIL",error:e}},Se=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={renameNoteId:null,renameFolderId:null},e.updateFolders=function(){e.props.onUpdateFolders(e.props.folders)},e.updateNotes=function(){e.props.onUpdateNotes(e.props.notes)},e.selectNoteHandler=function(t){e.props.onSelectNote(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onFetchFolders(),this.props.onFetchNotes(),this.updateFolders=U(this.updateFolders,2e3),this.updateNotes=U(this.updateNotes,3e3)}},{key:"componentDidUpdate",value:function(e){e.folders!==this.props.folders&&e.folders!==[]&&this.updateFolders(),e.notes!==this.props.notes&&e.notes!==[]&&this.updateNotes()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:ne.a.Explorer},r.a.createElement(Qe.Consumer,null,(function(t){var n=t.type,o=t.id,a=t.renameEndHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{onEndRename:function(e){return a(e)},renameId:"folder"===n?o:null,showContext:e.props.showContextMenu,addFolder:function(){return e.props.onAddFolder(Object(f.a)({},K))},current:e.props.currentFolder,select:e.props.onSelectFolder,folders:e.props.folders}),r.a.createElement(G,{onEndRename:function(e){return a(e)},renameId:"note"===n?o:null,showContext:e.props.showContextMenu,current:e.props.currentNote,select:e.props.onSelectNote,notes:"ALL_NOTES"===e.props.currentFolder?e.props.notes.filter((function(e){return"TRASH"!==e.folder})):e.props.notes.filter((function(t){return t.folder===e.props.currentFolder}))}))})))}}]),n}(o.Component),ge=Object(oe.b)((function(e){return{folders:e.folders.folders,currentFolder:e.folders.currentFolder,notes:e.notes.notes,currentNote:e.notes.currentNote}}),(function(e){return{onSelectFolder:function(t){return e(function(e){return{type:"SELECT_FOLDER",id:e}}(t))},onAddFolder:function(t){return e(function(e){return{type:"ADD_FOLDER",folder:Object(f.a)(Object(f.a)({},e),{},{id:ue.getId("folders")})}}(t))},onRenameFolder:function(t,n){return e(Ee(t,n))},onFetchFolders:function(){return e(_e())},onUpdateFolders:function(t){return e(function(e){return function(t,n){var o=n().folders;+o.lastUpdateFromClient>+o.lastUpdateFromServer?(t({type:"UPDATE_FOLDERS_START"}),ue.save({folders:e}).then((function(e){t(he())})).catch((function(e){t(function(e){return{type:"UPDATE_FOLDERS_FAIL",error:e}}(e))}))):t(he())}}(t))},onSelectNote:function(t){return e(se(t))},onRenameNote:function(t,n){return e(de(t,n))},onFetchNotes:function(){return e(fe())},onUpdateNotes:function(t){return e(function(e){return function(t,n){var o=n().notes;+o.lastUpdateFromClient>+o.lastUpdateFromServer?(t({type:"UPDATE_NOTE_START"}),ue.save({notes:e}).then((function(e){t(pe())})).catch((function(e){t(function(e){return{type:"UPDATE_NOTE_FAIL",error:e}}(e))}))):t(pe())}}(t))}}}))(Se),Ne=n(52),ve=n.n(Ne),Oe=n(118),ke=n.n(Oe),ye=n(71),Ie=n.n(ye),Ae=function(e){var t=e.buttons.map((function(t,n){return r.a.createElement(v,{key:n,active:t.active,btnType:t.icon,clicked:function(){t.active?e.toolbarBtnClicked(t.activeAction):e.toolbarBtnClicked(t.inactiveAction)}})}));return r.a.createElement("div",{className:Ie.a.NoteEditingToolbar},r.a.createElement("div",{className:Ie.a.ArrowBack,onClick:e.arrowClicked},r.a.createElement("span",{className:"material-icons"},"arrow_back_ios")),t)},Fe={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},we=["header","bold","italic","underline","strike","blockquote","list","bullet","indent","link","image"],Re=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).handleChange=function(t){e.props.currentNoteItem&&e.props.onInputText(e.props.currentNoteItem.id,t)},e.arrowBackHancler=function(){e.props.onSelectNote(null)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=r.a.createElement(ke.a,{modules:Fe,formats:we,readOnly:!this.props.currentNoteItem,value:this.props.currentNoteItem?this.props.currentNoteItem.content:"",className:ve.a.Quill,placeholder:"Create note and start writing...",onChange:this.handleChange}),t=[ve.a.NoteEditor];return this.props.isShow&&t.push(ve.a.ShowEditor),r.a.createElement("div",{className:t.join(" ")},r.a.createElement(Ae,{arrowClicked:this.arrowBackHancler,toolbarBtnClicked:function(){},buttons:[]}),e)}}]),n}(o.Component),De=Object(oe.b)((function(e){return{currentNote:e.notes.currentNote,currentNoteItem:e.notes.notes.find((function(t){return t.id===e.notes.currentNote})),notes:e.notes.notes}}),(function(e){return{onInputText:function(t,n){return e(function(e,t){return{type:"INPUT_TEXT",id:e,text:t}}(t,n))},onSelectNote:function(t){return e(se(t))}}}))(Re),xe=n(5),He=n(21),je=n.n(He),Le=function(e){var t=e.options.map((function(t,n){return t.isTable?r.a.createElement("li",{key:n,className:je.a.ContextMenuItem},t.name,function(e,t){var n=e.map((function(e,n){return r.a.createElement("li",{onClick:function(){return t(e.action)},key:n,style:{backgroundColor:e.backgroundColor,color:e.color}},e.icon&&r.a.createElement("span",{className:"material-icons"},e.icon))}));return r.a.createElement("ul",{className:je.a.TableMenu},n)}(t.buttons,e.optionHandler)):r.a.createElement("li",{onClick:function(){return e.optionHandler(t.action)},key:n,className:je.a.ContextMenuItem},t.name)})),n=[je.a.ContextMenu];return e.show?document.addEventListener("click",(function(){e.closed()})):n.push(je.a.Hide),r.a.createElement("div",{className:n.join(" "),style:{top:e.y,left:e.x}},r.a.createElement("ul",{className:je.a.ContextMenuItems},t))},Ue=n(53),Me=n.n(Ue),Pe=n(119),Be=n.n(Pe),Ve=function(e){var t=null;return e.open&&(t=r.a.createElement("div",{className:Be.a.Backdrop,onClick:e.clicked})),t},Ge=function(e){var t=[Me.a.SideDrawer];return e.open?t.push(Me.a.Open):t.push(Me.a.Close),r.a.createElement("div",null,r.a.createElement(Ve,{open:e.open,clicked:e.close}),r.a.createElement("div",{className:t.join(" ")},e.children))},Qe=r.a.createContext({type:null,id:null,renameEndHandler:function(e){}}),Xe=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(i.a)(this,n),(o=t.call(this,e)).contextMenuShowHandler=function(e,t,n){e.preventDefault();var r=e.pageX,a=e.pageY;o.setState({contextMenu:{x:r,y:a,show:!0,elemType:t,id:n}})},o.contextMenuHideHandler=function(){o.setState({contextMenu:{x:-100,y:-100,show:!1}})},o.toolbarNoteHandler=function(){o.props.isTrashOpen?o.props.onClearTrash():o.props.onAddNote(Object(f.a)(Object(f.a)({},q),{},{date:Date.now(),folder:"ALL_NOTES"!==o.props.currentFolder?o.props.currentFolder:"UNSORTED"}))},o.contextMenuOptionHandler=function(e){o.contextMenuHideHandler();var t=o.state.contextMenu.elemType,n=o.state.contextMenu.id;switch(e){case"Delete":"folder"===t?o.props.onRemoveFolder(n):"note"===t&&o.props.onMoveNoteToTrash(n);break;case"Rename":"folder"!==t&&"note"!==t||o.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{renameContext:Object(f.a)(Object(f.a)({},e.renameContext),{},{type:t,id:n})})}));break;case"Clear":if("folder"===t)o.props.onClearNotesInTrash();else if("note"===t)throw new Error("Trying clear trash when contextMenu.elemType === note");break;default:"backgroundColor"===Object.keys(e)[0]?o.props.onChangeFolderColor(n,e.backgroundColor):"icon"===Object.keys(e)[0]&&o.props.onChangeFolderIcon(n,e.icon)}},o.openSideDrawerHandler=function(){o.setState({isSideDrawerOpen:!0})},o.closeSideDrawerHandler=function(){o.setState({isSideDrawerOpen:!1})},o.renameEndHandler=function(e){var t=e.target.textContent,n=o.state.renameContext.type,r=o.state.renameContext.id;("blur"===e.type||"keypress"===e.type&&"Enter"===e.key)&&(o.setState((function(e){return Object(f.a)(Object(f.a)({},e),{},{renameContext:Object(f.a)(Object(f.a)({},e.renameContext),{},{type:null,id:null})})})),"folder"===n?o.props.onRenameFolder(r,t):o.props.onRenameNote(r,t))},o.state={renameContext:{type:null,id:null,renameEndHandler:o.renameEndHandler},contextMenu:{x:-100,y:-100,show:!1,elemType:null,id:null},isSideDrawerOpen:!1},o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("COMPONENT DID MOUNT"),setTimeout((function(){e.props.onInitSyncNotes(),e.props.onInitSyncFolders()}))}},{key:"render",value:function(){var e=null;this.props.isAuth||(e=r.a.createElement(xe.a,{to:"/"}));var t=!1,n=[m.a.Wrapper];return this.props.currentNote&&(t=!0,n.push(m.a.ShowEditor)),console.log(this.state.renameContext),r.a.createElement("div",{className:m.a.Tinote},e,r.a.createElement(Ge,{open:this.state.isSideDrawerOpen,close:this.closeSideDrawerHandler},r.a.createElement("p",{onClick:this.props.onLogout},"Logout")),r.a.createElement(Le,{optionHandler:this.contextMenuOptionHandler,closed:this.contextMenuHideHandler,show:this.state.contextMenu.show,x:this.state.contextMenu.x,y:this.state.contextMenu.y,options:"folder"===this.state.contextMenu.elemType?"TRASH"===this.state.contextMenu.id?$:z:Z}),r.a.createElement("div",{className:n.join(" ")},r.a.createElement(w,{openSideDrawer:this.openSideDrawerHandler,toolbarBtnType:this.props.isTrashOpen?"delete":"note_add",toolbarButtonClicked:this.toolbarNoteHandler}),r.a.createElement(Qe.Provider,{value:this.state.renameContext},r.a.createElement(ge,{contextElemType:this.state.contextMenu.elemType,id:this.state.contextMenu.id,showContextMenu:this.contextMenuShowHandler}))),r.a.createElement(De,{isShow:t}))}}]),n}(o.Component),Je=Object(oe.b)((function(e){return{isTrashOpen:"TRASH"===e.folders.currentFolder,currentFolder:e.folders.currentFolder,isAuth:e.auth.isAuth,currentNote:e.notes.currentNote}}),(function(e){return{onAddNote:function(t){return e(function(e){return{type:"ADD_NOTE",note:Object(f.a)(Object(f.a)({},e),{},{id:ue.getId("notes")})}}(t))},onLogout:function(){return e((function(e){e({type:"AUTH_START"}),Te.signOut().then((function(t){e({type:"AUTH_LOGOUT"})})).catch((function(t){console.log(t),e(Ce(t))}))}))},onClearTrash:function(){return e({type:"CLEAR_NOTES_IN_TRASH"})},onInitSyncNotes:function(){return e(me())},onInitSyncFolders:function(){return e(be)},onChangeFolderColor:function(t,n){return e(function(e,t){return{type:"CHANGE_FOLDER_COLOR",id:e,color:t}}(t,n))},onChangeFolderIcon:function(t,n){return e(function(e,t){return{type:"CHANGE_FOLDER_ICON",id:e,icon:t}}(t,n))},onClearNotesInTrash:function(){return e({type:"CLEAR_NOTES_IN_TRASH"})},onRemoveFolder:function(t){return e(function(e){return{type:"REMOVE_FOLDER",id:e}}(t))},onMoveNoteToTrash:function(t){return e(function(e){return{type:"MOVE_TO_TRASH_NOTE",id:e}}(t))},onRenameFolder:function(t,n){return e(Ee(t,n))},onRenameNote:function(t,n){return e(de(t,n))}}}))(Xe),We=n(32),Ye=n.n(We),Ke=function(e){var t=[Ye.a.InputElement];return e.invalid&&t.push(Ye.a.Invalid),r.a.createElement("div",{className:Ye.a.Input},r.a.createElement("input",Object.assign({},e.elemConfig,{className:t.join(" "),type:e.type,value:e.value,onInput:e.onInput,placeholder:e.placeholder})),r.a.createElement("span",{className:Ye.a.Error},e.error))},qe=n(74),ze=n.n(qe),Ze=function(e){var t=[ze.a.Button];return t.push(ze.a[e.btnTupe]),r.a.createElement("button",{type:e.type,className:t.join(" "),onClick:e.clicked,disabled:e.disabled},e.children)},$e=n(76),et=n.n($e),tt=n(75),nt=n.n(tt),ot=n(120),rt=n.n(ot),at=function(e){return r.a.createElement("div",{className:rt.a.loader},"Loading...")},ct=function(e){Object(u.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isEmailInvalid:!1,isPasswordInvalid:!1,isSignin:!0,emailValue:"",passwordValue:""},e.emailInputHandler=function(t){et.a.isEmail(t.target.value)?e.state.isEmailInvalid&&e.setState({isEmailInvalid:!1,emailValue:t.target.value}):e.state.isEmailInvalid||e.setState({isEmailInvalid:!0,emailValue:t.target.value})},e.passwordInputHandler=function(t){et.a.isLength(t.target.value,{min:6,max:24})?e.setState({isPasswordInvalid:!1,passwordValue:t.target.value}):e.setState({isPasswordInvalid:!0,passwordValue:t.target.value})},e.sumbitHandler=function(t){t.preventDefault(),e.state.isEmailInvalid||e.state.isPasswordInvalid||(e.state.isSignin?e.props.onSignin(e.state.emailValue,e.state.passwordValue):e.props.onSignup(e.state.emailValue,e.state.passwordValue))},e.switchModeHandler=function(t){t.preventDefault(),e.setState((function(e){return{isSignin:!e.isSignin}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.onCheckAuthState()}},{key:"render",value:function(){var e=null;this.props.isAuth&&(e=r.a.createElement(xe.a,{to:"/tinote"}));var t=r.a.createElement(at,null);return this.props.loading||(t=r.a.createElement("form",{onSubmit:this.sumbitHandler,className:nt.a.Auth},r.a.createElement(Ke,{placeholder:"Email",type:"text",onInput:this.emailInputHandler,invalid:this.state.isEmailInvalid,error:this.state.isEmailInvalid?"Invalid email":null}),r.a.createElement(Ke,{placeholder:"Password",type:"password",onInput:this.passwordInputHandler,invalid:this.state.isPasswordInvalid,error:this.state.isPasswordInvalid?"Password must be min 6 characters":null}),r.a.createElement("div",{className:nt.a.Buttons},r.a.createElement(Ze,{type:"submit"},this.state.isSignin?"Signin":"Signup"),r.a.createElement(Ze,{type:"button",clicked:this.switchModeHandler},"Switch to ",this.state.isSignin?"Signup":"Signin")))),r.a.createElement(r.a.Fragment,null,e,t)}}]),n}(r.a.Component),it=Object(oe.b)((function(e){return{isAuth:e.auth.isAuth,loading:e.auth.loading}}),(function(e){return{onSignin:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"}),Te.signInWithEmailAndPassword(e,t).then((function(e){n({type:"AUTH_SUCCESS"})})).catch((function(e){console.log(e),n(Ce(e))}))}}(t,n))},onSignup:function(t,n){return e(function(e,t){return function(n){n({type:"AUTH_START"}),Te.createUserWithEmailAndPassword(e,t).then((function(e){n({type:"AUTH_SUCCESS"})})).catch((function(e){console.log(e),n(Ce(e))}))}}(t,n))},onCheckAuthState:function(){return e((function(e){e({type:"AUTH_START"}),Te.onAuthStateChanged((function(t){e(t?{type:"AUTH_SUCCESS"}:{type:"AUTH_LOGOUT"})}))}))}}}))(ct);var lt=function(){return r.a.createElement(d,null,r.a.createElement(xe.d,null,r.a.createElement(xe.b,{path:"/auth",component:it}),r.a.createElement(xe.b,{path:"/tinote",component:Je}),r.a.createElement(xe.a,{to:"/auth"})))},ut=n(20),st=n(121),dt=n(48),ft=n.n(dt),pt={notes:[],currentNote:null,loading:!1,error:null,lastUpdateFromClient:null,lastUpdateFromServer:null},mt=function(e,t){return L(e,{currentNote:t.id})},Et=function(e,t){return L(e,{notes:e.notes.concat(t.note)})},_t=function(e,t){return L(e,{notes:e.notes.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{folder:"TRASH"}):e}))})},ht=function(e,t){return L(e,{notes:e.notes.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{content:t.text}):e}))})},bt=function(e,t){return L(e,{notes:e.notes.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{title:t.newName}):e}))})},Tt=function(e,t){return L(e,{loading:!0,error:null})},Ct=function(e,t){return L(e,{currentNote:null,notes:t.notes,loading:!1,error:null,lastUpdateFromServer:t.date})},St=function(e,t){return L(e,{loading:!1,error:t.error})},gt=function(e,t){return L(e,{loading:!0,error:null,lastUpdateFromClient:t.date})},Nt=function(e,t){return L(e,{loading:!1,error:null,lastUpdateFromClient:t.date})},vt=function(e,t){return L(e,{loading:!1,error:t.error})},Ot=function(e,t){return Object(f.a)(Object(f.a)({},e),{},{notes:e.notes.filter((function(e){return"TRASH"!==e.folder}))})},kt=function(e,t){return L(e,{lastUpdateFromServer:t.date,notes:ft.a.unionBy(t.updated,e.notes.filter((function(e){return!t.deleted.find((function(t){return t.id===e.id}))})),"id")})},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_NOTE":return mt(e,t);case"ADD_NOTE":return Et(e,t);case"MOVE_TO_TRASH_NOTE":return _t(e,t);case"INPUT_TEXT":return ht(e,t);case"RENAME_NOTE":return bt(e,t);case"FETCH_NOTE_START":return Tt(e);case"FETCH_NOTE_SUCCESS":return Ct(e,t);case"FETCH_NOTE_FAIL":return St(e,t);case"UPDATE_NOTE_START":return gt(e,t);case"UPDATE_NOTE_SUCCESS":return Nt(e,t);case"UPDATE_NOTE_FAIL":return vt(e,t);case"CLEAR_NOTES_IN_TRASH":return Ot(e);case"SYNC_NOTES_FROM_SERVER":return kt(e,t);default:return e}},It={folders:[],currentFolder:"ALL_NOTES",loading:!1,error:null,lastUpdateFromClient:null,lastUpdateFromServer:null},At=function(e,t){return L(e,{currentFolder:t.id})},Ft=function(e,t){return L(e,{folders:e.folders.concat(t.folder)})},wt=function(e,t){return L(e,{folders:e.folders.filter((function(e){return e.id!==t.id}))})},Rt=function(e,t){return L(e,{folders:e.folders.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{name:t.newName}):e}))})},Dt=function(e,t){return L(e,{loading:!0,error:null})},xt=function(e,t){return L(e,{folders:t.folders,loading:!1,error:null,lastUpdateFromServer:t.date})},Ht=function(e,t){return L(e,{loading:!1,error:t.error})},jt=function(e,t){return L(e,{loading:!0,error:null})},Lt=function(e,t){return L(e,{loading:!1,error:null,lastUpdateFromClient:t.date})},Ut=function(e,t){return L(e,{loading:!1,error:t.error})},Mt=function(e,t){return L(e,{folders:e.folders.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{icon:t.icon}):e}))})},Pt=function(e,t){return L(e,{folders:e.folders.map((function(e){return e.id===t.id?Object(f.a)(Object(f.a)({},e),{},{color:t.color}):e}))})},Bt=function(e,t){return L(e,{lastUpdateFromServer:t.date,folders:ft.a.unionBy(t.updated,e.folders.filter((function(e){return!t.deleted.find((function(t){return t.id===e.id}))})),"id")})},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_FOLDER":return At(e,t);case"ADD_FOLDER":return Ft(e,t);case"REMOVE_FOLDER":return wt(e,t);case"RENAME_FOLDER":return Rt(e,t);case"FETCH_FOLDERS_START":return Dt(e);case"FETCH_FOLDERS_SUCCESS":return xt(e,t);case"FETCH_FOLDERS_FAIL":return Ht(e,t);case"UPDATE_FOLDERS_START":return jt(e);case"UPDATE_FOLDERS_SUCCESS":return Lt(e,t);case"UPDATE_FOLDERS_FAIL":return Ut(e,t);case"CHANGE_FOLDER_ICON":return Mt(e,t);case"CHANGE_FOLDER_COLOR":return Pt(e,t);case"SYNC_FOLDERS_FROM_SERVER":return Bt(e,t);default:return e}},Gt=n(47),Qt={loading:!1,error:null,isAuth:!1},Xt=function(e,t){return L(e,{error:null,loading:!0})},Jt=function(e,t){return L(e,{error:t.error,loading:!1,isAuth:!0})},Wt=function(e,t){return L(e,{error:t.error,loading:!1})},Yt=function(e,t){return L(e,{error:null,loading:!1,isAuth:!1})},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return Xt(e);case"AUTH_SUCCESS":return Jt(e,t);case"AUTH_FAIL":return Wt(e,t);case"AUTH_LOGOUT":return Yt(e);default:return e}},qt=(n(318),Object(ut.c)({notes:yt,folders:Vt,auth:Kt})),zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ut.d,Zt=Object(ut.e)(qt,zt(Object(ut.a)(st.a)));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe.a,{store:Zt},r.a.createElement(Gt.a,null,r.a.createElement(lt,null)))),document.getElementById("root"))},32:function(e,t,n){e.exports={Input:"Input_Input__2nBj8",InputElement:"Input_InputElement__10NDC",Invalid:"Input_Invalid__3QHhq",Error:"Input_Error__3bIX4"}},49:function(e,t,n){e.exports={Tinote:"Tinote_Tinote__zR4LF",Wrapper:"Tinote_Wrapper__2uM3T",ShowEditor:"Tinote_ShowEditor__1UYHh"}},50:function(e,t,n){e.exports={Profile:"Profile_Profile__27aSU",Img:"Profile_Img__1uK1f",ProfileName:"Profile_ProfileName__1r2QR"}},51:function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__-usOs",Search:"Toolbar_Search__N9e9d",Button:"Toolbar_Button__2GQQB"}},52:function(e,t,n){e.exports={NoteEditor:"NoteEditor_NoteEditor__32Jd1",Quill:"NoteEditor_Quill__2sfGQ",ShowEditor:"NoteEditor_ShowEditor__20fAX"}},53:function(e,t,n){e.exports={SideDrawer:"SideDrawer_SideDrawer__2J4x8",Open:"SideDrawer_Open__2kDGZ",Close:"SideDrawer_Close__3IzkX"}},67:function(e,t,n){e.exports={ToolbarButton:"ToolbarButton_ToolbarButton__1h2sg",Active:"ToolbarButton_Active__3gHIp"}},71:function(e,t,n){e.exports={NoteEditingToolbar:"NoteEditingToolbar_NoteEditingToolbar__1mAYl",ArrowBack:"NoteEditingToolbar_ArrowBack__hEszf"}},74:function(e,t,n){e.exports={Button:"Button_Button__1bqV7"}},75:function(e,t,n){e.exports={Auth:"Auth_Auth__ZsR1l",Buttons:"Auth_Buttons__2mV6p"}}},[[122,1,2]]]);
//# sourceMappingURL=main.951fb1ea.chunk.js.map